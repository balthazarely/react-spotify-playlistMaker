(this["webpackJsonpbalthazar-music-memoery"]=this["webpackJsonpbalthazar-music-memoery"]||[]).push([[0],{114:function(e,t,s){},124:function(e,t,s){},125:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s(0),a=s.n(r),c=s(16),i=s.n(c),o=(s(114),s(115),s(57)),l=s.n(o),u=s(89),d=s(83),j=s(9),m=s(73);function h(e){var t=e.artist,s=e.index,r=e.getSimilarArtists;return Object(n.jsxs)("div",{className:"result-container",children:[Object(n.jsx)("index",{className:"index-wrapper",children:Object(n.jsx)("div",{children:s})}),Object(n.jsx)("img",{className:"image-wrapper",src:t.images.length>0?t.images[1].url:null,alt:"artist-image"}),Object(n.jsxs)("div",{className:"text-wrapper",children:[Object(n.jsx)("div",{className:"header",children:t.name}),Object(n.jsx)("div",{className:"genre-wrapper",children:t.genres.slice(0,3).map((function(e){return Object(n.jsx)(m.a,{size:"tiny",children:e})}))})]}),Object(n.jsx)("div",{className:"btn-wrapper",children:Object(n.jsx)("button",{onClick:function(){return r(t.id)},children:"Make Playlist"})})]})}function b(e){var t=e.searchResults,s=e.setArtist,r=e.getSimilarArtists;return Object(n.jsx)("div",{children:t&&t.map((function(e,t){return Object(n.jsx)(h,{artist:e,index:t,setArtist:s,getSimilarArtists:r},e.id)}))})}var p=s(142);function O(e){var t=e.searchHandler,s=e.searchArtists;return Object(n.jsx)("div",{className:"input-wrapper",children:Object(n.jsx)(p.a,{className:"input-search",placeholder:"Search Artist...",size:"medium",onChange:function(e){return t(e)},fluid:!0,onKeyDown:function(e){return function(e){"Enter"===e.key&&s(e)}(e)}})})}function g(e){var t=e.menuOpen,s=e.searchHandler,r=e.searchArtists,a=e.searchResults,c=e.getSimilarArtists;return Object(n.jsx)("div",{className:"main-container ".concat(t?"":"no-margin"),children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"main-header",children:"Search Artist "}),Object(n.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/dj2.jpg')",backgroundBlendMode:"multiply",backgroundPosition:"top",backgroundSize:"cover"}}),Object(n.jsx)(O,{searchHandler:s,searchArtists:r}),Object(n.jsx)(b,{searchResults:a,getSimilarArtists:c})]})})}var f=s(51),v=s(71);function x(e){var t=e.setSliderWindowBottomOpen,s=e.menuOpen,a=e.setSliderWindowOpen,c=e.setSearchPageShowing,i=e.myDetails,o=e.setMenuOpen,l=e.setErrorMessage,u=e.setErrorMessageBottom,d=Object(r.useState)("favorite"),m=Object(j.a)(d,2),h=m[0],b=m[1];return Object(n.jsxs)("div",{className:"sidemenu ".concat(s?"active-menu":""),children:[Object(n.jsx)("img",{src:"/soundbytes-logo.svg",alt:"",className:"menu-logo"}),Object(n.jsxs)("div",{className:"button-wrapper",children:[Object(n.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){c(!0),a(!1),t(!1),b("search"),o(!(window.innerWidth<768)),l(!1),u(!1)},children:[Object(n.jsx)(f.a,{name:"search",size:"big",className:"icon-btn ".concat("search"===h?"btn-active-icon":"")}),Object(n.jsx)("div",{className:"btn-text",children:"Search Artists"})]}),Object(n.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){c(!1),a(!1),t(!1),b("favorite"),o(!(window.innerWidth<768)),l(!1),u(!1)},children:[Object(n.jsx)(f.a,{name:"favorite",size:"big",className:"icon-btn ".concat("favorite"===h?"btn-active-icon":"")}),Object(n.jsx)("div",{className:"btn-text",children:"Favorite Artists"})]}),Object(n.jsxs)("div",{className:"profile-container",children:[i.display_name?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"my-profile-name",children:["Logged in as ",i.display_name]})}):null,Object(n.jsx)(v.b,{to:"/login",children:Object(n.jsx)("button",{className:"button-small",style:{marginTop:"10px"},children:"Logout"})})]})]})]})}function S(e){var t=e.setMenuOpen,s=e.menuOpen;return Object(n.jsx)("nav",{children:Object(n.jsx)("div",{className:"nav-wrapper",children:Object(n.jsx)("button",{onClick:function(){return t(!s)},children:"Menu"})})})}function w(e){var t=e.getTopSongsSimilarArtists,s=e.sliderWindowOpen,a=e.setSliderWindowOpen,c=e.errorMessage,i=e.setErrorMessage,o=Object(r.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],m=Object(r.useState)(""),h=Object(j.a)(m,2),b=h[0],O=h[1];return Object(n.jsxs)("div",{className:"slider-container ".concat(s?"slider-open":""),children:[Object(n.jsxs)("div",{className:"controls-before",children:[Object(n.jsx)("h2",{children:"Please name playlist"}),Object(n.jsx)(p.a,{fluid:!0,placeholder:"Playlist name",size:"medium",value:b,onChange:function(e){d(e.target.value),O(e.target.value)}}),c?Object(n.jsx)("div",{className:"error-message",children:"Please enter name"}):null,Object(n.jsxs)("div",{className:"btn-container",children:[Object(n.jsx)("button",{className:"btn success",onClick:function(){u?(t(u),a(!1),O(""),i(!1)):i(!0)},children:"Make Playlist"}),Object(n.jsx)("button",{className:"btn cancle",onClick:function(){a(!1),O(""),i(!1)},children:"cancel"})]})]}),")"]})}function k(e){var t=e.sliderWindowBottomOpen,s=e.setSliderWindowBottomOpen,a=e.makePlaylistFromSong,c=e.errorMessageBottom,i=e.setErrorMessageBottom,o=Object(r.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],m=Object(r.useState)(""),h=Object(j.a)(m,2),b=h[0],O=h[1];return Object(n.jsxs)("div",{className:"slider-container ".concat(t?"slider-open":""),children:[Object(n.jsxs)("div",{className:"controls-before",children:[Object(n.jsx)("h2",{children:"Please name playlist"}),Object(n.jsx)(p.a,{fluid:!0,placeholder:"Playlist name",size:"medium",value:b,onChange:function(e){d(e.target.value),O(e.target.value)}}),c?Object(n.jsx)("div",{className:"error-message",children:"Please enter name"}):null,Object(n.jsxs)("div",{className:"btn-container",children:[Object(n.jsx)("button",{className:"btn success",onClick:function(){u?(a(u),s(!1),O(""),i(!1)):i(!0)},children:"Make Playlist"}),Object(n.jsx)("button",{className:"btn cancle",onClick:function(){s(!1),O(""),i(!1)},children:"cancle"})]})]}),")"]})}var y=s(144),N=s(99);function A(e){var t=e.artist,s=e.getSimilarArtists;return Object(n.jsx)(y.a.Column,{children:Object(n.jsxs)("div",{className:"favorite-wrapper",children:[Object(n.jsx)(N.a,{className:"favorite-image-wrapper",src:t.images.length>0?t.images[1].url:null}),Object(n.jsx)("div",{className:"artist-name-bg"}),Object(n.jsx)("div",{className:"artist-name",children:t.name}),Object(n.jsx)(f.a,{className:"artist-play-icon",size:"large",name:"check circle outline",onClick:function(){return s(t.id)}})]})})}function T(e){var t=e.myFavoriteArtists,s=e.getSimilarArtists;return console.log(t),Object(n.jsx)("div",{children:Object(n.jsx)(y.a,{stackable:!0,columns:4,doubling:!0,children:t&&t.map((function(e){return Object(n.jsx)(A,{artist:e,getSimilarArtists:s})}))})})}function P(e){var t=e.song,s=e.index,a=(e.usesTools,e.updateUsesTools),c=Object(r.useState)(!1),i=Object(j.a)(c,2),o=i[0],l=i[1];return Object(n.jsxs)("div",{className:"result-container ".concat(o?"active-result":""),onClick:function(){var e;e=t.id,a(e),l(!o)},children:[Object(n.jsx)("index",{className:"index-wrapper",children:Object(n.jsx)("div",{children:s+1})}),Object(n.jsx)("img",{className:"image-wrapper",src:t.album.images.length>0?t.album.images[1].url:null,alt:"artist-image"}),Object(n.jsxs)("div",{className:"text-wrapper",children:[Object(n.jsx)("div",{className:"header",children:t.name}),Object(n.jsx)("div",{className:"artist-small-wrapper",children:t.artists.slice(0,3).map((function(e,t){return Object(n.jsx)("span",{children:(t?", ":"")+e.name},t)}))})]}),Object(n.jsx)("div",{class:"checkbox-wrapper",children:o?Object(n.jsx)(f.a,{name:"check",size:"large",style:{color:"#07c7f2"}}):null})]})}function C(e){var t=e.myFavoriteTracks,s=e.getSimilarSongsRecomendations,r=e.usesTools,a=e.updateUsesTools;return Object(n.jsx)("div",{className:"favorite-songs-container",children:t&&t.map((function(e,t){return Object(n.jsx)(P,{song:e,getSimilarSongsRecomendations:s,index:t,usesTools:r,updateUsesTools:a})}))})}function B(e){var t=e.menuOpen,s=e.myFavoriteArtists,a=e.myFavoriteTracks,c=e.getSimilarArtists,i=e.setUsesTools,o=e.getSimilarSongsRecomendations,l=e.setSliderWindowBottomOpen,u=e.setSliderWindowOpen,d=e.usesTools,m=e.updateUsesTools,h=Object(r.useState)(!0),b=Object(j.a)(h,2),p=b[0],O=b[1];return Object(n.jsxs)("div",{className:"main-container ".concat(t?"":"no-margin"),children:[Object(n.jsx)("div",{className:"favorite-add-btn-sticky-btm ".concat(d.length>0?"":"hidden"),children:Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"button-primary",onClick:function(){return l(!0)},children:"MAKE PLAYLIST"})})}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"main-header",children:"Recent Favorites"}),Object(n.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/dj.jpg')",backgroundBlendMode:"darken",backgroundPosition:"top",backgroundSize:"cover"}}),Object(n.jsx)("div",{className:"btn-wrapper"}),Object(n.jsx)("div",{className:"selector-words-container flex-horizontal-spaced",children:Object(n.jsxs)("div",{className:"selector-word-wrapper",children:[Object(n.jsx)("div",{className:"selector-word ".concat(p?"active":""),onClick:function(){O(!0),l(!1),u(!1),i([])},children:"Artists"}),Object(n.jsx)("div",{className:"selector-word ".concat(p?"":"active"),onClick:function(){O(!1),l(!1),u(!1),i([])},children:"Songs"})]})}),p?Object(n.jsx)(T,{myFavoriteArtists:s,getSimilarArtists:c}):Object(n.jsx)(C,{myFavoriteTracks:a,getSimilarSongsRecomendations:o,usesTools:d,updateUsesTools:m})]})]})}var E,M={getAccessToken:function(){if(E)return console.log(E),E;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){E=e[1];var s=Number(t[1]);return window.setTimeout((function(){return E=""}),1e3*s),window.history.pushState("Access Token",null,"/"),console.log(E),E}var n="https://accounts.spotify.com/authorize?client_id=".concat("75512e8899a34ca7a0dce9fb97ef9eab","&response_type=token&scope=user-read-recently-played user-top-read playlist-modify-public&show_dialog=true&redirect_uri=").concat("https://hot-jam.surge.sh/");console.log(E),window.location=n},searchArtists:function(e){var t=M.getAccessToken(),s={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist"),{headers:s}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getSimilarArtists:function(e){var t=M.getAccessToken(),s={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/related-artists"),{headers:s}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getTopSongs:function(e){var t=M.getAccessToken(),s={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/top-tracks?market=ES"),{headers:s}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.tracks.map((function(e){return{uri:e.uri}})).slice(0,4)}))},getUsersTopArtists:function(){var e=M.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/artists?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.items}))},getUsersTopTracks:function(){var e=M.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json()})).then((function(e){return console.log(e,"TOP SONGS"),e.items}))},getMyDetails:function(){var e=M.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)}))},makePlaylistFromArtistAndSong:function(e){var t=M.getAccessToken(),s={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/recommendations?seed_tracks=".concat(e),{headers:s}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)}))},savePlaylist:function(e,t){if(e&&t.length){var s,n,r=M.getAccessToken(),a={Authorization:"Bearer ".concat(r)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(r){return s=r.id,fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists"),{method:"POST",headers:a,body:JSON.stringify({name:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return n=e.id,fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists/").concat(n,"/tracks"),{method:"POST",headers:a,body:JSON.stringify({uris:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))}))}))}}},_=M;function z(e){for(var t,s,n=e.length;0!==n;)s=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[s],e[s]=t;return e}var F=s(58);s(123),s(124);var W=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),s=(t[0],t[1],Object(r.useState)({})),a=Object(j.a)(s,2),c=a[0],i=a[1],o=Object(r.useState)([]),m=Object(j.a)(o,2),h=m[0],b=m[1],p=Object(r.useState)([]),O=Object(j.a)(p,2),f=O[0],v=O[1],y=Object(r.useState)(""),N=Object(j.a)(y,2),A=N[0],T=N[1],P=Object(r.useState)([]),C=Object(j.a)(P,2),E=C[0],M=C[1],W=Object(r.useState)([]),R=Object(j.a)(W,2),D=R[0],U=R[1],L=Object(r.useState)(window.innerWidth>768),q=Object(j.a)(L,2),H=q[0],I=q[1],J=Object(r.useState)(!1),G=Object(j.a)(J,2),K=G[0],Y=G[1],Q=Object(r.useState)(!1),V=Object(j.a)(Q,2),X=V[0],Z=V[1],$=Object(r.useState)(!0),ee=Object(j.a)($,2),te=(ee[0],ee[1],Object(r.useState)(!1)),se=Object(j.a)(te,2),ne=se[0],re=se[1],ae=Object(r.useState)(!1),ce=Object(j.a)(ae,2),ie=ce[0],oe=ce[1],le=Object(r.useState)(!1),ue=Object(j.a)(le,2),de=ue[0],je=ue[1];Object(r.useEffect)((function(){_.getMyDetails().then((function(e){console.log(e),i(e)})),_.getUsersTopArtists().then((function(e){b(e)})),_.getUsersTopTracks().then((function(e){v(e)}))}),[]);var me=function(e){Y(!0),_.getSimilarArtists(e).then((function(e){console.log(e),U(e.artists)}))},he=function(){var e=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==D.length){e.next=6;break}return console.log("sorry, noe enoguth related artists"),xe(),e.abrupt("return");case 6:return s=[],e.next=9,D.map((function(e){_.getTopSongs(e.id).then((function(e){s.push(e)}))}));case 9:setTimeout((function(){var e,n=s.flat(),r=(e=[]).concat.apply(e,Object(u.a)(n.map(Object.values))),a=t,c=z(r);_.savePlaylist(a,c)}),2e3),ve();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=Object(r.useState)([]),pe=Object(j.a)(be,2),Oe=pe[0],ge=pe[1],fe=function(){var e=Object(d.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.next=3,Oe.map((function(e){_.makePlaylistFromArtistAndSong(e).then((function(e){e.tracks.map((function(e){console.log(e.uri),s.push(e.uri)}))}))}));case 3:setTimeout((function(){if(0!==s.length){var e=t,n=z(s);_.savePlaylist(e,n)}else xe()}),2e3),ve();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){return F.b.info("Playlist Created!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},xe=function(){return F.b.error("Not enough similar artists",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(S,{menuOpen:H,setMenuOpen:I}),de?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{menuOpen:H,searchHandler:function(e){e.preventDefault(),console.log(e.target.value),T(e.target.value)},searchArtists:function(e){e.preventDefault(),_.searchArtists(A).then((function(e){M(e.artists.items),console.log(e.artists.items)}))},searchResults:E,getSimilarArtists:me}),Object(n.jsx)(w,{sliderWindowOpen:K,setSliderWindowOpen:Y,getTopSongsSimilarArtists:he,errorMessage:ne,setErrorMessage:re}),Object(n.jsx)(F.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(B,{menuOpen:H,myFavoriteArtists:h,myFavoriteTracks:f,getSimilarArtists:me,usesTools:Oe,setUsesTools:ge,updateUsesTools:function(e){Oe.includes(e)?ge(Oe.filter((function(t){return t!=e}))):ge([].concat(Object(u.a)(Oe),[e]))},setSliderWindowBottomOpen:Z,setSliderWindowOpen:Y}),Object(n.jsx)(w,{sliderWindowOpen:K,setSliderWindowOpen:Y,getTopSongsSimilarArtists:he,errorMessage:ne,setErrorMessage:re}),Object(n.jsx)(k,{sliderWindowBottomOpen:X,setSliderWindowBottomOpen:Z,makePlaylistFromSong:fe,errorMessageBottom:ie,setErrorMessageBottom:oe}),Object(n.jsx)(F.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),Object(n.jsx)(x,{setSliderWindowOpen:Y,menuOpen:H,setSearchPageShowing:je,setSliderWindowBottomOpen:Z,myDetails:c,setMenuOpen:I,setErrorMessage:re,setErrorMessageBottom:oe})]})};function R(){var e;return Object(n.jsx)("div",{className:"login",children:Object(n.jsxs)("div",{className:"btn-container",children:[Object(n.jsx)("img",{src:"/soundbytes-logo.svg",alt:""}),Object(n.jsx)("button",{className:"button-large",onClick:function(){if(e)return console.log(e),e;var t=window.location.href.match(/access_token=([^&]*)/),s=window.location.href.match(/expires_in=([^&]*)/);if(t&&s){e=t[1];var n=Number(s[1]);return window.setTimeout((function(){return e=""}),1e3*n),window.history.pushState("Access Token",null,"/"),console.log(e),e}var r="https://accounts.spotify.com/authorize?client_id=".concat("75512e8899a34ca7a0dce9fb97ef9eab","&response_type=token&scope=user-read-recently-played user-top-read playlist-modify-public&show_dialog=true&redirect_uri=").concat("http://localhost:3000/");console.log(e),window.location=r},children:"Enter App"})]})})}var D=s(11);var U=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(v.a,{children:Object(n.jsxs)(D.c,{children:[Object(n.jsx)(D.a,{exact:!0,path:"/",children:Object(n.jsx)(W,{})}),Object(n.jsx)(D.a,{exact:!0,path:"/login",children:Object(n.jsx)(R,{})})]})})})},L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,145)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),r(e),a(e),c(e)}))},q=s(98),H=s(72),I=s(37),J="ADD_ACCESS_TOKEN",G="GET_USER_DETAILS",K="GET_USER_TOP_PLAYED_ARTISTS",Y={accessToken:null,userDetails:null,userTopPlayedArtists:null};function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(I.a)(Object(I.a)({},e),{},{accessToken:t.payload});case G:case K:return Object(I.a)(Object(I.a)({},e),{},{userDetails:t.payload});default:return e}}var V=Object(H.b)(Q);i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(q.a,{store:V,children:Object(n.jsx)(U,{})})}),document.getElementById("root")),L()}},[[125,1,2]]]);
//# sourceMappingURL=main.926c032b.chunk.js.map