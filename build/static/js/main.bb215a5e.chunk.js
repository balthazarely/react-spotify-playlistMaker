(this["webpackJsonpbalthazar-music-memoery"]=this["webpackJsonpbalthazar-music-memoery"]||[]).push([[0],{117:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(0),c=n.n(r),a=n(19),i=n.n(a),o=(n(117),n(118),n(87)),l=n.n(o),u=n(101),j=n(96),d=n(10),m=n(58);function h(e){var t=e.artist,n=e.index,r=e.getSimilarArtists;return Object(s.jsxs)("div",{className:"result-container",children:[Object(s.jsx)("index",{className:"index-wrapper",children:Object(s.jsx)("div",{children:n})}),Object(s.jsx)("img",{className:"image-wrapper",src:t.images.length>0?t.images[1].url:null,alt:"artist-image"}),Object(s.jsxs)("div",{className:"text-wrapper",children:[Object(s.jsx)("div",{className:"header",children:t.name}),Object(s.jsx)("div",{className:"genre-wrapper",children:t.genres.slice(0,3).map((function(e){return Object(s.jsx)(m.a,{size:"tiny",children:e})}))})]}),Object(s.jsx)("div",{className:"btn-wrapper",children:Object(s.jsx)("button",{onClick:function(){return r(t.id)},children:"Make Playlist"})})]})}function b(e){var t=e.searchResults,n=e.setArtist,r=e.getSimilarArtists;return Object(s.jsx)("div",{children:t&&t.map((function(e,t){return Object(s.jsx)(h,{artist:e,index:t,setArtist:n,getSimilarArtists:r},e.id)}))})}var f=n(141);function p(e){var t=e.searchHandler,n=e.searchArtists;return Object(s.jsx)("div",{className:"input-wrapper",children:Object(s.jsx)(f.a,{className:"input-search",placeholder:"Search Artist...",size:"medium",onChange:function(e){return t(e)},fluid:!0,onKeyDown:function(e){return function(e){"Enter"===e.key&&n(e)}(e)}})})}function g(e){var t=e.menuOpen,n=e.searchHandler,r=e.searchArtists,c=e.searchResults,a=e.getSimilarArtists;return Object(s.jsx)("div",{className:"main-container ".concat(t?"":"no-margin"),children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"main-header",children:"Search Artist "}),Object(s.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/dj.jpg')",backgroundBlendMode:"multiply",backgroundPosition:"top",backgroundSize:"cover"}}),Object(s.jsx)(p,{searchHandler:n,searchArtists:r}),Object(s.jsx)(b,{searchResults:c,getSimilarArtists:a})]})})}var O=n(43);function v(e){var t=e.menuOpen,n=e.setSliderWindowOpen,c=e.setSearchPageShowing,a=Object(r.useState)("favorite"),i=Object(d.a)(a,2),o=i[0],l=i[1];return Object(s.jsx)("div",{className:"sidemenu ".concat(t?"active-menu":""),children:Object(s.jsxs)("div",{className:"button-wrapper",children:[Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){c(!0),n(!1),l("search")},children:[Object(s.jsx)(O.a,{name:"search",size:"big",className:"icon-btn ".concat("search"===o?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"Search Artists"})]}),Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){c(!1),n(!1),l("favorite")},children:[Object(s.jsx)(O.a,{name:"favorite",size:"big",className:"icon-btn ".concat("favorite"===o?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"Favorite Artists"})]}),Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){c(!1),l("about")},children:[Object(s.jsx)(O.a,{name:"question",size:"big",className:"icon-btn ".concat("about"===o?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"About"})]})]})})}function x(e){var t=e.setMenuOpen,n=e.menuOpen;return Object(s.jsx)("nav",{children:Object(s.jsx)("div",{className:"nav-wrapper",children:Object(s.jsx)("button",{onClick:function(){return t(!n)},children:"Menu"})})})}n(142);n(92);function w(e){var t=e.getTopSongsSimilarArtists,n=e.sliderWindowOpen,c=e.setSliderWindowOpen,a=e.notify,i=Object(r.useState)(""),o=Object(d.a)(i,2),l=o[0],u=o[1];return Object(s.jsxs)("div",{className:"slider-container ".concat(n?"slider-open":""),children:[Object(s.jsxs)("div",{className:"controls-before",children:[Object(s.jsx)("h2",{children:"Please name playlist"}),Object(s.jsx)(f.a,{fluid:!0,placeholder:"Playlist name",size:"medium",onChange:function(e){return u(e.target.value)}}),Object(s.jsxs)("div",{className:"btn-container",children:[Object(s.jsx)("button",{className:"btn success",onClick:function(){t(l),c(!1),a()},children:"Make Playlist"}),Object(s.jsx)("button",{className:"btn cancle",onClick:function(){return c(!1)},children:"cancle"})]})]}),")"]})}var k=n(144),S=n(100);function y(e){var t=e.artist,n=e.getSimilarArtists;return Object(s.jsx)(k.a.Column,{children:Object(s.jsxs)("div",{className:"favorite-wrapper",children:[Object(s.jsx)(S.a,{className:"favorite-image-wrapper",src:t.images.length>0?t.images[1].url:null}),Object(s.jsx)("div",{className:"artist-name-bg"}),Object(s.jsx)("div",{className:"artist-name",children:t.name}),Object(s.jsx)(O.a,{className:"artist-play-icon",size:"large",name:"play circle outline",onClick:function(){return n(t.id)}})]})})}function A(e){var t=e.myFavoriteArtists,n=e.getSimilarArtists;return console.log(t),Object(s.jsx)("div",{children:Object(s.jsx)(k.a,{stackable:!0,columns:4,doubling:!0,children:t&&t.map((function(e){return Object(s.jsx)(y,{artist:e,getSimilarArtists:n})}))})})}function N(e){var t=e.song;return console.log(t),Object(s.jsxs)("div",{className:"result-container",children:[Object(s.jsx)("index",{className:"index-wrapper"}),Object(s.jsx)("img",{className:"image-wrapper",src:t.album.images.length>0?t.album.images[1].url:null,alt:"artist-image"}),Object(s.jsxs)("div",{className:"text-wrapper",children:[Object(s.jsx)("div",{className:"header",children:t.name}),Object(s.jsx)("div",{className:"artist-small-wrapper",children:t.artists.map((function(e,t){return Object(s.jsx)("span",{children:(t?", ":"")+e.name},t)}))})]})]})}function T(e){var t=e.myFavoriteTracks;return Object(s.jsx)("div",{children:t&&t.map((function(e){return Object(s.jsx)(N,{song:e})}))})}function C(e){var t=e.menuOpen,n=e.myFavoriteArtists,c=e.myFavoriteTracks,a=e.getSimilarArtists,i=Object(r.useState)(!0),o=Object(d.a)(i,2),l=o[0],u=o[1];return Object(s.jsx)("div",{className:"main-container ".concat(t?"":"no-margin"),children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"main-header",children:"Recent Favorites"}),Object(s.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/band4.jpg')",backgroundBlendMode:"multiply",backgroundPosition:"top",backgroundSize:"cover"}}),Object(s.jsx)("div",{className:"btn-wrapper"}),Object(s.jsxs)("div",{className:"selector-words-container flex-horizontal",children:[Object(s.jsxs)("div",{className:"selector-word ".concat(l?"active":""),onClick:function(){return u(!0)},children:[" ","Artists"]}),Object(s.jsx)("div",{className:"selector-word ".concat(l?"":"active"),onClick:function(){return u(!1)},children:"Songs"})]}),l?Object(s.jsx)(A,{myFavoriteArtists:n,getSimilarArtists:a}):Object(s.jsx)(T,{myFavoriteTracks:c})]})})}var z;var P={getAccessToken:function(){if(z)return console.log(z),z;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){z=e[1];var n=Number(t[1]);return window.setTimeout((function(){return z=""}),1e3*n),window.history.pushState("Access Token",null,"/"),console.log(z),z}var s="https://accounts.spotify.com/authorize?client_id=".concat("75512e8899a34ca7a0dce9fb97ef9eab","&response_type=token&scope=playlist-modify-public&show_dialog=true&redirect_uri=").concat("http://localhost:3000/");console.log(z),window.location=s},searchArtists:function(e){var t=P.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist"),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getSimilarArtists:function(e){var t=P.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/related-artists"),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getTopSongs:function(e){var t=P.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/top-tracks?market=ES"),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e.tracks.map((function(e){return{uri:e.uri}})).slice(0,4)}))},getUsersTopArtists:function(){var e=P.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/artists?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e.items}))},getUsersTopTracks:function(){var e=P.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return console.log(e,"TOP SONGS"),e.items}))},getMyDetails:function(){var e=P.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)}))},savePlaylist:function(e,t){if(e&&t.length){var n,s,r=P.getAccessToken(),c={Authorization:"Bearer ".concat(r)};return fetch("https://api.spotify.com/v1/me",{headers:c}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(r){return n=r.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists"),{method:"POST",headers:c,body:JSON.stringify({name:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return s=e.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists/").concat(s,"/tracks"),{method:"POST",headers:c,body:JSON.stringify({uris:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))}))}))}}},F=P,B=n(56);n(126);var R=function(){var e=Object(r.useState)(null),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({}),i=Object(d.a)(a,2),o=i[0],m=i[1],h=Object(r.useState)([]),b=Object(d.a)(h,2),f=b[0],p=b[1],O=Object(r.useState)([]),k=Object(d.a)(O,2),S=k[0],y=k[1],A=Object(r.useState)(""),N=Object(d.a)(A,2),T=N[0],z=N[1],P=Object(r.useState)([]),R=Object(d.a)(P,2),E=R[0],q=R[1],M=Object(r.useState)(!1),_=Object(d.a)(M,2),D=(_[0],_[1]),W=Object(r.useState)(!1),H=Object(d.a)(W,2);H[0],H[1],Object(r.useEffect)((function(){var e=F.getAccessToken();c(e),F.getMyDetails().then((function(e){console.log(e),m(e)})),F.getUsersTopArtists().then((function(e){p(e)})),F.getUsersTopTracks().then((function(e){y(e)}))}),[]);var I=Object(r.useState)([]),J=Object(d.a)(I,2),L=(J[0],J[1],Object(r.useState)([])),U=Object(d.a)(L,2),G=U[0],K=U[1],Q=function(e){se(!0),D(!0),F.getSimilarArtists(e).then((function(e){console.log(e),K(e.artists)}))},V=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,G.map((function(e){F.getTopSongs(e.id).then((function(e){n.push(e),console.log(n)}))}));case 3:setTimeout((function(){var e,s=n.flat(),r=(e=[]).concat.apply(e,Object(u.a)(s.map(Object.values)));console.log(r,"this is the final array");var c=t,a=r;F.savePlaylist(c,a)}),3e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=Object(r.useState)(!0),Y=Object(d.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useState)(!1),te=Object(d.a)(ee,2),ne=te[0],se=te[1],re=Object(r.useState)(!1),ce=Object(d.a)(re,2),ae=ce[0],ie=ce[1],oe=function(){return B.b.success("Playlist Created!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(x,{menuOpen:Z,setMenuOpen:$}),ae?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g,{menuOpen:Z,searchHandler:function(e){e.preventDefault(),console.log(e.target.value),z(e.target.value)},searchArtists:function(e){e.preventDefault(),F.searchArtists(T).then((function(e){q(e.artists.items),console.log(e.artists.items)}))},searchResults:E,getSimilarArtists:Q}),Object(s.jsx)(w,{sliderWindowOpen:ne,setSliderWindowOpen:se,getTopSongsSimilarArtists:V,notify:oe}),Object(s.jsx)(B.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(C,{menuOpen:Z,accessToken:n,myDetails:o,myFavoriteArtists:f,myFavoriteTracks:S,getSimilarArtists:Q}),Object(s.jsx)(w,{sliderWindowOpen:ne,setSliderWindowOpen:se,getTopSongsSimilarArtists:V,notify:oe}),Object(s.jsx)(B.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),Object(s.jsx)(v,{setSliderWindowOpen:se,menuOpen:Z,getAccessToken:function(e){e.preventDefault(),F.getAccessToken().then((function(e){console.log(e),c(e)}))},setSearchPageShowing:ie})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(R,{})}),document.getElementById("root")),E()}},[[127,1,2]]]);
//# sourceMappingURL=main.bb215a5e.chunk.js.map