(this["webpackJsonpbalthazar-music-memoery"]=this["webpackJsonpbalthazar-music-memoery"]||[]).push([[0],{100:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(0),a=n.n(r),i=n(15),c=n.n(i),o=(n(100),n(101),n(50)),l=n.n(o),u=n(75),d=n(72),j=n(8),m=n(65);function h(e){var t=e.artist,n=e.index,r=e.getSimilarArtists;return Object(s.jsxs)("div",{className:"result-container",children:[Object(s.jsx)("index",{className:"index-wrapper",children:Object(s.jsx)("div",{children:n})}),Object(s.jsx)("img",{className:"image-wrapper",src:t.images.length>0?t.images[1].url:null,alt:"artist-image"}),Object(s.jsxs)("div",{className:"text-wrapper",children:[Object(s.jsx)("div",{className:"header",children:t.name}),Object(s.jsx)("div",{className:"genre-wrapper",children:t.genres.slice(0,3).map((function(e){return Object(s.jsx)(m.a,{size:"tiny",children:e})}))})]}),Object(s.jsx)("div",{className:"btn-wrapper",children:Object(s.jsx)("button",{onClick:function(){return r(t.id)},children:"Make Playlist"})})]})}function b(e){var t=e.searchResults,n=e.setArtist,r=e.getSimilarArtists;return Object(s.jsx)("div",{children:t&&t.map((function(e,t){return Object(s.jsx)(h,{artist:e,index:t,setArtist:n,getSimilarArtists:r},e.id)}))})}var p=n(128);function f(e){var t=e.searchHandler,n=e.searchArtists;return Object(s.jsx)("div",{className:"input-wrapper",children:Object(s.jsx)(p.a,{className:"input-search",placeholder:"Search Artist...",size:"medium",onChange:function(e){return t(e)},fluid:!0,onKeyDown:function(e){return function(e){"Enter"===e.key&&n(e)}(e)}})})}function g(e){var t=e.menuOpen,n=e.searchHandler,r=e.searchArtists,a=e.searchResults,i=e.getSimilarArtists;return Object(s.jsx)("div",{className:"main-container ".concat(t?"":"no-margin"),children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"main-header",children:"Search Artist "}),Object(s.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/dj.jpg')",backgroundBlendMode:"multiply",backgroundPosition:"top",backgroundSize:"cover"}}),Object(s.jsx)(f,{searchHandler:n,searchArtists:r}),Object(s.jsx)(b,{searchResults:a,getSimilarArtists:i})]})})}var O=n(45);function v(e){var t=e.menuOpen,n=e.setSliderWindowOpen,a=e.setSliderWindowBottomOpen,i=e.setSearchPageShowing,c=e.myDetails,o=Object(r.useState)("favorite"),l=Object(j.a)(o,2),u=l[0],d=l[1];return Object(s.jsx)("div",{className:"sidemenu ".concat(t?"active-menu":""),children:Object(s.jsxs)("div",{className:"button-wrapper",children:[Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){i(!0),n(!1),d("search")},children:[Object(s.jsx)(O.a,{name:"search",size:"big",className:"icon-btn ".concat("search"===u?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"Search Artists"})]}),Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){i(!1),n(!1),a(!1),d("favorite")},children:[Object(s.jsx)(O.a,{name:"favorite",size:"big",className:"icon-btn ".concat("favorite"===u?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"Favorite Artists"})]}),Object(s.jsxs)("div",{className:"icon-btn-wrapper",onClick:function(){i(!1),d("about")},children:[Object(s.jsx)(O.a,{name:"question",size:"big",className:"icon-btn ".concat("about"===u?"btn-active-icon":"")}),Object(s.jsx)("div",{className:"btn-text",children:"About"}),c.display_name?Object(s.jsx)("div",{children:c.display_name}):null]})]})})}function x(e){var t=e.setMenuOpen,n=e.menuOpen;return Object(s.jsx)("nav",{children:Object(s.jsx)("div",{className:"nav-wrapper",children:Object(s.jsx)("button",{onClick:function(){return t(!n)},children:"Menu"})})})}function S(e){var t=e.getTopSongsSimilarArtists,n=e.sliderWindowOpen,a=e.setSliderWindowOpen,i=(e.notify,Object(r.useState)("")),c=Object(j.a)(i,2),o=c[0],l=c[1],u=Object(r.useState)(""),d=Object(j.a)(u,2),m=d[0],h=d[1];return Object(s.jsxs)("div",{className:"slider-container ".concat(n?"slider-open":""),children:[Object(s.jsxs)("div",{className:"controls-before",children:[Object(s.jsx)("h2",{children:"Please name playlist"}),Object(s.jsx)(p.a,{fluid:!0,placeholder:"Playlist name",size:"medium",value:m,onChange:function(e){l(e.target.value),h(e.target.value)}}),Object(s.jsxs)("div",{className:"btn-container",children:[Object(s.jsx)("button",{className:"btn success",onClick:function(){t(o),a(!1),h("")},children:"Make Playlist"}),Object(s.jsx)("button",{className:"btn cancle",onClick:function(){a(!1),h("")},children:"cancel"})]})]}),")"]})}function k(e){var t=e.sliderWindowBottomOpen,n=e.setSliderWindowBottomOpen,a=e.makePlaylistFromSong,i=(e.notify,Object(r.useState)("")),c=Object(j.a)(i,2),o=c[0],l=c[1],u=Object(r.useState)(""),d=Object(j.a)(u,2),m=d[0],h=d[1];return Object(s.jsxs)("div",{className:"slider-container ".concat(t?"slider-open":""),children:[Object(s.jsxs)("div",{className:"controls-before",children:[Object(s.jsx)("h2",{children:"Please name playlist"}),Object(s.jsx)(p.a,{fluid:!0,placeholder:"Playlist name",size:"medium",value:m,onChange:function(e){l(e.target.value),h(e.target.value)}}),Object(s.jsxs)("div",{className:"btn-container",children:[Object(s.jsx)("button",{className:"btn success",onClick:function(){a(o),n(!1),h("")},children:"Make Playlist"}),Object(s.jsx)("button",{className:"btn cancle",onClick:function(){n(!1),h("")},children:"cancle"})]})]}),")"]})}var w=n(130),y=n(85);function A(e){var t=e.artist,n=e.getSimilarArtists;return Object(s.jsx)(w.a.Column,{children:Object(s.jsxs)("div",{className:"favorite-wrapper",children:[Object(s.jsx)(y.a,{className:"favorite-image-wrapper",src:t.images.length>0?t.images[1].url:null}),Object(s.jsx)("div",{className:"artist-name-bg"}),Object(s.jsx)("div",{className:"artist-name",children:t.name}),Object(s.jsx)(O.a,{className:"artist-play-icon",size:"large",name:"play circle outline",onClick:function(){return n(t.id)}})]})})}function N(e){var t=e.myFavoriteArtists,n=e.getSimilarArtists;return console.log(t),Object(s.jsx)("div",{children:Object(s.jsx)(w.a,{stackable:!0,columns:4,doubling:!0,children:t&&t.map((function(e){return Object(s.jsx)(A,{artist:e,getSimilarArtists:n})}))})})}function T(e){var t=e.song,n=e.index,r=(e.getSimilarSongsRecomendations,e.usesTools,e.updateUsesTools);return Object(s.jsxs)("div",{className:"result-container",children:[Object(s.jsx)("index",{className:"index-wrapper",children:Object(s.jsx)("div",{children:n+1})}),Object(s.jsx)("img",{className:"image-wrapper",src:t.album.images.length>0?t.album.images[1].url:null,alt:"artist-image"}),Object(s.jsxs)("div",{className:"text-wrapper",children:[Object(s.jsx)("div",{className:"header",children:t.name}),Object(s.jsx)("div",{className:"artist-small-wrapper",children:t.artists.slice(0,6).map((function(e,t){return Object(s.jsx)("span",{children:(t?", ":"")+e.name},t)}))})]}),Object(s.jsx)("div",{class:"checkbox-wrapper",children:Object(s.jsx)("input",{type:"checkbox",id:"test1",className:"checkmark",label:"Add",value:t.id,onChange:function(e){return function(e){var t=e.target.value;r(t)}(e)}})})," "]})}function P(e){var t=e.myFavoriteTracks,n=e.getSimilarSongsRecomendations,r=e.usesTools,a=e.updateUsesTools;return Object(s.jsx)("div",{className:"favorite-songs-container",children:t&&t.map((function(e,t){return Object(s.jsx)(T,{song:e,getSimilarSongsRecomendations:n,index:t,usesTools:r,updateUsesTools:a})}))})}function C(e){var t=e.menuOpen,n=e.myFavoriteArtists,a=e.myFavoriteTracks,i=e.getSimilarArtists,c=(e.showPlaylistBtnSongs,e.getSimilarSongsRecomendations),o=e.setSliderWindowBottomOpen,l=e.setSliderWindowOpen,u=e.usesTools,d=e.updateUsesTools,m=Object(r.useState)(!0),h=Object(j.a)(m,2),b=h[0],p=h[1];return Object(s.jsxs)("div",{className:"main-container ".concat(t?"":"no-margin"),children:[Object(s.jsx)("div",{className:"favorite-add-btn-sticky-btm ".concat(u.length>0?"":"hidden"),children:Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"button-primary",onClick:function(){return o(!0)},children:"MAKE PLAYLIST"})})}),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("div",{className:"main-header",children:"Recent Favorites"}),Object(s.jsx)("div",{className:"main-image-wrapper",style:{backgroundImage:"linear-gradient(to right, rgba(7, 176, 242, 0.3), rgba(7, 176, 242, 0.3)), url('/dj2.jpg')",backgroundBlendMode:"darken",backgroundPosition:"top",backgroundSize:"cover"}}),Object(s.jsx)("div",{className:"btn-wrapper"}),Object(s.jsx)("div",{className:"selector-words-container flex-horizontal-spaced",children:Object(s.jsxs)("div",{className:"selector-word-wrapper",children:[Object(s.jsx)("div",{className:"selector-word ".concat(b?"active":""),onClick:function(){p(!0),o(!1),l(!1)},children:"Artists"}),Object(s.jsx)("div",{className:"selector-word ".concat(b?"":"active"),onClick:function(){p(!1),o(!1),l(!1)},children:"Songs"})]})}),b?Object(s.jsx)(N,{myFavoriteArtists:n,getSimilarArtists:i}):Object(s.jsx)(P,{myFavoriteTracks:a,getSimilarSongsRecomendations:c,usesTools:u,updateUsesTools:d})]})]})}var B,F={getAccessToken:function(){if(B)return console.log(B),B;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){B=e[1];var n=Number(t[1]);return window.setTimeout((function(){return B=""}),1e3*n),window.history.pushState("Access Token",null,"/"),console.log(B),B}var s="https://accounts.spotify.com/authorize?client_id=".concat("75512e8899a34ca7a0dce9fb97ef9eab","&response_type=token&scope=user-read-recently-played user-top-read playlist-modify-public&show_dialog=true&redirect_uri=").concat("https://hot-jam.surge.sh/");console.log(B),window.location=s},searchArtists:function(e){var t=F.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist"),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getSimilarArtists:function(e){var t=F.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/related-artists"),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))},getTopSongs:function(e){var t=F.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/artists/".concat(e,"/top-tracks?market=ES"),{headers:n}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.tracks.map((function(e){return{uri:e.uri}})).slice(0,4)}))},getUsersTopArtists:function(){var e=F.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/artists?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.items}))},getUsersTopTracks:function(){var e=F.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch(" https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=30&offset=0",{headers:t}).then((function(e){if(e.ok)return e.json()})).then((function(e){return console.log(e,"TOP SONGS"),e.items}))},getMyDetails:function(){var e=F.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)}))},makePlaylistFromArtistAndSong:function(e){var t=F.getAccessToken(),n={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/recommendations?seed_tracks=".concat(e),{headers:n}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)}))},savePlaylist:function(e,t){if(e&&t.length){var n,s,r=F.getAccessToken(),a={Authorization:"Bearer ".concat(r)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(r){return n=r.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists"),{method:"POST",headers:a,body:JSON.stringify({name:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return s=e.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists/").concat(s,"/tracks"),{method:"POST",headers:a,body:JSON.stringify({uris:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Request failed!")}),(function(e){console.log(e.message)})).then((function(e){return e}))}))}))}}},z=F;function W(e){for(var t,n,s=e.length;0!==s;)n=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[n],e[n]=t;return e}var R=n(51);n(109),n(110);var M=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)({}),c=Object(j.a)(i,2),o=c[0],m=c[1],h=Object(r.useState)([]),b=Object(j.a)(h,2),p=b[0],f=b[1],O=Object(r.useState)([]),w=Object(j.a)(O,2),y=w[0],A=w[1],N=Object(r.useState)(""),T=Object(j.a)(N,2),P=T[0],B=T[1],F=Object(r.useState)([]),M=Object(j.a)(F,2),_=M[0],E=M[1],U=Object(r.useState)(!0),q=Object(j.a)(U,2),D=q[0],H=q[1],L=Object(r.useState)(!1),I=Object(j.a)(L,2),J=I[0],K=I[1],G=Object(r.useState)(!1),Y=Object(j.a)(G,2),Q=Y[0],V=Y[1],X=Object(r.useState)(!0),Z=Object(j.a)(X,2),$=Z[0],ee=(Z[1],Object(r.useState)(!1)),te=Object(j.a)(ee,2),ne=te[0],se=te[1];Object(r.useEffect)((function(){var e=z.getAccessToken();a(e),z.getMyDetails().then((function(e){console.log(e),m(e)})),z.getUsersTopArtists().then((function(e){f(e)})),z.getUsersTopTracks().then((function(e){A(e)}))}),[]);var re=Object(r.useState)([]),ae=Object(j.a)(re,2),ie=ae[0],ce=ae[1],oe=Object(r.useState)([]),le=Object(j.a)(oe,2),ue=(le[0],le[1],function(e){K(!0),z.getSimilarArtists(e).then((function(e){console.log(e),ce(e.artists)}))}),de=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==ie.length){e.next=6;break}return console.log("sorry, noe enoguth related artists"),ge(),e.abrupt("return");case 6:return n=[],e.next=9,ie.map((function(e){z.getTopSongs(e.id).then((function(e){n.push(e)}))}));case 9:setTimeout((function(){var e,s=n.flat(),r=(e=[]).concat.apply(e,Object(u.a)(s.map(Object.values))),a=t,i=W(r);z.savePlaylist(a,i)}),2e3),fe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=Object(r.useState)([]),me=Object(j.a)(je,2),he=me[0],be=me[1],pe=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,he.map((function(e){z.makePlaylistFromArtistAndSong(e).then((function(e){e.tracks.map((function(e){console.log(e.uri),n.push(e.uri)}))}))}));case 3:setTimeout((function(){if(0!==n.length){var e=t,s=W(n);z.savePlaylist(e,s)}else ge()}),2e3),fe();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){return R.b.info("Playlist Created!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},ge=function(){return R.b.error("Not enough similar artists",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(x,{menuOpen:D,setMenuOpen:H}),ne?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g,{menuOpen:D,searchHandler:function(e){e.preventDefault(),console.log(e.target.value),B(e.target.value)},searchArtists:function(e){e.preventDefault(),z.searchArtists(P).then((function(e){E(e.artists.items),console.log(e.artists.items)}))},searchResults:_,getSimilarArtists:ue}),Object(s.jsx)(S,{sliderWindowOpen:J,setSliderWindowOpen:K,getTopSongsSimilarArtists:de,notify:fe}),Object(s.jsx)(R.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(C,{menuOpen:D,accessToken:n,myFavoriteArtists:p,myFavoriteTracks:y,getSimilarArtists:ue,showPlaylistBtnSongs:$,usesTools:he,updateUsesTools:function(e){he.includes(e)?be(he.filter((function(t){return t!=e}))):be([].concat(Object(u.a)(he),[e]))},makePlaylistFromSong:pe,setSliderWindowBottomOpen:V,setSliderWindowOpen:K}),Object(s.jsx)(S,{sliderWindowOpen:J,setSliderWindowOpen:K,getTopSongsSimilarArtists:de,notify:fe}),Object(s.jsx)(k,{sliderWindowBottomOpen:Q,setSliderWindowBottomOpen:V,makePlaylistFromSong:pe,notify:fe}),Object(s.jsx)(R.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),Object(s.jsx)(v,{setSliderWindowOpen:K,menuOpen:D,getAccessToken:function(e){console.log("its going");var t=z.getAccessToken();a(t)},setSearchPageShowing:se,setSliderWindowBottomOpen:V,myDetails:o})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),a(e),i(e)}))};c.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root")),_()}},[[111,1,2]]]);
//# sourceMappingURL=main.2dfcf739.chunk.js.map